<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of atbaselem</title>
  <meta name="keywords" content="atbaselem">
  <meta name="description" content="ATBASELEM  Create an AT element structure + various checks">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>

<!-- ../../menu.html atmat --><!-- ../menu.html lattice --><!-- menu.html element_creation --><h1>atbaselem
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>ATBASELEM  Create an AT element structure + various checks</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function elem = atbaselem(famname,method,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../../atcollab.png)"><pre class="comment">ATBASELEM  Create an AT element structure + various checks

ELEM=ATBASELEM(FAMNAME,METHOD,'FIELDNAME1',VALUE1,...) create AT element
   Create an AT element structure and check the consistence of
   PolynomA, PolynomB, MaxOrder and NumIntSteps

  NOTES
    1. length of PolynomA and PolynomB are equal (zero padding)
    2. MaxOrder is always lenght(PolynomA) - 1</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../../atcollab.png)">
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../atmat/lattice/getoption.html" class="code" title="function [optval,opts] = getoption(opts,optname,defval)">getoption</a>	GETOPTION Extract a keyword argument from the input arguments</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../atmat/atdemos/trackWithImpedance/makeFastRingWithBBR.html" class="code" title="">makeFastRingWithBBR</a>	SI units</li><li><a href="../../../atmat/lattice/atfastring.html" class="code" title="function [newring,newringrad] = atfastring(ring0,varargin)">atfastring</a>	ATFASTRING Generate simplified AT structures</li><li><a href="atM66.html" class="code" title="function elem=atM66(fname,varargin)">atM66</a>	ATM66(FAMNAME,M66,PASSMETHOD)</li><li><a href="atM66Tijk.html" class="code" title="function elem=atM66Tijk(fname,varargin)">atM66Tijk</a>	ATM66(FAMNAME,M66,Tijk,PASSMETHOD)</li><li><a href="atQuantDiff.html" class="code" title="function elem=atQuantDiff(fname,varargin)">atQuantDiff</a>	atQuantDiff creates a quantum diffusion element</li><li><a href="ataperture.html" class="code" title="function elem=ataperture(fname,varargin)">ataperture</a>	ATAPERTURE Creates a aperture element</li><li><a href="atcorrector.html" class="code" title="function elem=atcorrector(fname,varargin)">atcorrector</a>	ATCORRECTOR Creates a drift space element with class 'Corrector'</li><li><a href="atdrift.html" class="code" title="function elem=atdrift(fname,varargin)">atdrift</a>	ATDRIFT Creates a drift space element with Class 'Drift'</li><li><a href="atmarker.html" class="code" title="function elem=atmarker(fname,varargin)">atmarker</a>	ATMARKER Creates a marker space element</li><li><a href="atmonitor.html" class="code" title="function elem=atmonitor(fname,varargin)">atmonitor</a>	ATMONITOR Creates a Beam Position Monitor element with Class 'Monitor'</li><li><a href="atmultipole.html" class="code" title="function elem=atmultipole(fname,varargin)">atmultipole</a>	ATMULTIPOLE Creates a multipole element</li><li><a href="atquadrupole.html" class="code" title="function elem=atquadrupole(fname,varargin)">atquadrupole</a>	ATQUADRUPOLE Creates a quadrupole element with Class 'Quadrupole'</li><li><a href="atrbend.html" class="code" title="function elem=atrbend(fname,varargin)">atrbend</a>	ATRBEND Creates a rectangular bending magnet element with class 'Bend'</li><li><a href="atrfcavity.html" class="code" title="function elem=atrfcavity(fname,varargin)">atrfcavity</a>	ATRFCAVITY Creates an rfcavity element with Class 'RFCavity'</li><li><a href="atringparam.html" class="code" title="function elem=atringparam(fname,varargin)">atringparam</a>	ATRINGPARAM Creates a RingParameter Element which should go at the beginning of the ring</li><li><a href="atsbend.html" class="code" title="function elem=atsbend(fname,varargin)">atsbend</a>	ATSBEND Creates a sector bending magnet element with class 'Bend'</li><li><a href="atsextupole.html" class="code" title="function elem=atsextupole(fname,varargin)">atsextupole</a>	ATSEXTUPOLE Creates a sextupole element with class 'Sextupole'</li><li><a href="atskewquad.html" class="code" title="function elem = atskewquad(fname,varargin)">atskewquad</a>	ATSKEWQUAD Creates a skew quadrupole element with Class 'Multipole'</li><li><a href="atsolenoid.html" class="code" title="function Elem=atsolenoid(fname,varargin)">atsolenoid</a>	ATSOLENOID Creates a new solenoid element with Class 'Solenoid'</li><li><a href="atthinmultipole.html" class="code" title="function elem=atthinmultipole(fname,varargin)">atthinmultipole</a>	ATTHINMULTIPOLE Creates a thin multipole element</li></ul>
</div>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../../atcollab.png)"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function elem = atbaselem(famname,method,varargin)</a>
0002 <span class="comment">%ATBASELEM  Create an AT element structure + various checks</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%ELEM=ATBASELEM(FAMNAME,METHOD,'FIELDNAME1',VALUE1,...) create AT element</span>
0005 <span class="comment">%   Create an AT element structure and check the consistence of</span>
0006 <span class="comment">%   PolynomA, PolynomB, MaxOrder and NumIntSteps</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%  NOTES</span>
0009 <span class="comment">%    1. length of PolynomA and PolynomB are equal (zero padding)</span>
0010 <span class="comment">%    2. MaxOrder is always lenght(PolynomA) - 1</span>
0011 
0012 DefaultNumIntSteps = 10;
0013 
0014 [famname,rsrc] = <a href="../../../atmat/lattice/getoption.html" class="code" title="function [optval,opts] = getoption(opts,optname,defval)">getoption</a>(varargin,<span class="string">'FamName'</span>,famname);
0015 [method,rsrc]  = <a href="../../../atmat/lattice/getoption.html" class="code" title="function [optval,opts] = getoption(opts,optname,defval)">getoption</a>(rsrc,<span class="string">'PassMethod'</span>,method);
0016 [lg,rsrc]      = <a href="../../../atmat/lattice/getoption.html" class="code" title="function [optval,opts] = getoption(opts,optname,defval)">getoption</a>(rsrc,<span class="string">'Length'</span>,0);
0017 elem           = struct(<span class="string">'FamName'</span>,famname,<span class="string">'PassMethod'</span>,method,<span class="string">'Length'</span>,lg,rsrc{:});
0018 
0019 <span class="comment">% Making PolynomA of same length with zero padding when necesssary</span>
0020 ab = isfield(elem,{<span class="string">'PolynomA'</span>,<span class="string">'PolynomB'</span>});
0021 <span class="keyword">if</span> any(ab)
0022     <span class="keyword">if</span> ~ab(1), elem.PolynomA=[]; <span class="keyword">end</span>
0023     <span class="keyword">if</span> ~ab(2), elem.PolynomB=[]; <span class="keyword">end</span>
0024     <span class="keyword">if</span> ~isfield(elem,<span class="string">'MaxOrder'</span>)
0025         elem.MaxOrder=max([1 find(abs(elem.PolynomB)&gt;0,1,<span class="string">'last'</span>) find(abs(elem.PolynomA)&gt;0,1,<span class="string">'last'</span>)])-1;
0026     <span class="keyword">end</span>
0027     la = length(elem.PolynomA);
0028     lb = length(elem.PolynomB);
0029     <span class="keyword">if</span> la &lt; elem.MaxOrder+1, elem.PolynomA=[elem.PolynomA zeros(1,elem.MaxOrder+1-la)]; <span class="keyword">end</span>
0030     <span class="keyword">if</span> lb &lt; elem.MaxOrder+1, elem.PolynomB=[elem.PolynomB zeros(1,elem.MaxOrder+1-lb)]; <span class="keyword">end</span>
0031     la = length(elem.PolynomA);
0032     lb = length(elem.PolynomB);
0033     <span class="keyword">if</span> la &lt; lb, elem.PolynomA = [elem.PolynomA zeros(1,lb-la)]; <span class="keyword">end</span>
0034     <span class="keyword">if</span> lb &lt; la, elem.PolynomB = [elem.PolynomB zeros(1,la-lb)]; <span class="keyword">end</span>
0035     <span class="keyword">if</span> elem.Length ~= 0 &amp;&amp; ~isfield(elem,<span class="string">'NumIntSteps'</span>)
0036         elem.NumIntSteps = DefaultNumIntSteps;
0037     <span class="keyword">end</span>
0038 <span class="keyword">end</span>
0039 
0040 <span class="keyword">end</span></pre></div>
<hr>
<hr><address>GitHub Website <strong><a href="https://github.com/atcollab/at" target="_parent">at</a></strong> &copy; 2018</address>
<br />
<address>Generated on Sun 04-Mar-2018 00:43:10 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>