<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of getoption</title>
  <meta name="keywords" content="getoption">
  <meta name="description" content="GETOPTION Extract a keyword argument from the input arguments">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>

<!-- ../menu.html atmat --><!-- menu.html lattice --><h1>getoption
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>GETOPTION Extract a keyword argument from the input arguments</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [optval,opts] = getoption(opts,optname,defval) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../atcollab.png)"><pre class="comment">GETOPTION Extract a keyword argument from the input arguments

OPTVAL=GETOPTION(ARGS,OPTNAME)
   Extract a keyword argument, in the form of a pair &quot;name,value&quot; from
   input arguments (typically from VARARGIN).
    Return the value of the desired option from the argument list and
    send an exception if it is absent. Option names are case insensitive
 ARGS:     Argument list (cell array or structure)
 OPTNAME:    Name of the desired option


OPTVAL=GETOPTION(ARGS,OPTNAME,OPTDEFAULT)
    Return a default value if the option is absent
 OPTDEFAULT:   Default value for the option

[OPTVAL,NEWARGS]=GETOPTION(...)
  Return the remaining arguments after removing the processed ones

Example:

function testfunc(varargin)

[optflag,args]=getflag(varargin,'option');     % Extract an optional flag
[range,args]=getoption(args,'Range', 1:10);    % Extract a keyword argument
[width, height]=getargs(args,{210,297});       % Extract positional arguments

See also <a href="getflag.html" class="code" title="function [flag,opts] = getflag(opts,optname)">GETFLAG</a>, <a href="getargs.html" class="code" title="function varargout = getargs(args,default_values)">GETARGS</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../atcollab.png)">
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../atmat/atphysics/NonLinearDynamics/atnuampl.html" class="code" title="function varargout=atnuampl(ring,ampl,xz,varargin)">atnuampl</a>	ATNUAMPL	computes tune shift with amplitude</li><li><a href="../../atmat/atplot/atbaseplot.html" class="code" title="function curve = atbaseplot(varargin)">atbaseplot</a>	ATBASEPLOT Plots data generated by a user-supplied function</li><li><a href="../../atmat/atplot/atplot.html" class="code" title="function curve = atplot(varargin)">atplot</a>	ATPLOT Plots optical functions</li><li><a href="../../atmat/attrack/linepass.html" class="code" title="function [Rout,varargout] = linepass(line,Rin,refpts,varargin)">linepass</a>	LINEPASS tracks particles through each element of the cell array LINE</li><li><a href="../../atmat/attrack/ringpass.html" class="code" title="function [Rout, varargout] = ringpass(ring, Rin, nturns, varargin)">ringpass</a>	RINGPASS tracks particles through each element of the cell array RING</li><li><a href="../../atmat/lattice/element_creation/atM66.html" class="code" title="function elem=atM66(fname,varargin)">atM66</a>	ATM66(FAMNAME,M66,PASSMETHOD)</li><li><a href="../../atmat/lattice/element_creation/atM66Tijk.html" class="code" title="function elem=atM66Tijk(fname,varargin)">atM66Tijk</a>	ATM66(FAMNAME,M66,Tijk,PASSMETHOD)</li><li><a href="../../atmat/lattice/element_creation/atQuantDiff.html" class="code" title="function elem=atQuantDiff(fname,varargin)">atQuantDiff</a>	atQuantDiff creates a quantum diffusion element</li><li><a href="../../atmat/lattice/element_creation/ataperture.html" class="code" title="function elem=ataperture(fname,varargin)">ataperture</a>	ATAPERTURE Creates a aperture element</li><li><a href="../../atmat/lattice/element_creation/atbaselem.html" class="code" title="function elem = atbaselem(famname,method,varargin)">atbaselem</a>	ATBASELEM  Create an AT element structure + various checks</li><li><a href="../../atmat/lattice/element_creation/atcorrector.html" class="code" title="function elem=atcorrector(fname,varargin)">atcorrector</a>	ATCORRECTOR Creates a drift space element with class 'Corrector'</li><li><a href="../../atmat/lattice/element_creation/atdrift.html" class="code" title="function elem=atdrift(fname,varargin)">atdrift</a>	ATDRIFT Creates a drift space element with Class 'Drift'</li><li><a href="../../atmat/lattice/element_creation/atmarker.html" class="code" title="function elem=atmarker(fname,varargin)">atmarker</a>	ATMARKER Creates a marker space element</li><li><a href="../../atmat/lattice/element_creation/atmonitor.html" class="code" title="function elem=atmonitor(fname,varargin)">atmonitor</a>	ATMONITOR Creates a Beam Position Monitor element with Class 'Monitor'</li><li><a href="../../atmat/lattice/element_creation/atmultipole.html" class="code" title="function elem=atmultipole(fname,varargin)">atmultipole</a>	ATMULTIPOLE Creates a multipole element</li><li><a href="../../atmat/lattice/element_creation/atquadrupole.html" class="code" title="function elem=atquadrupole(fname,varargin)">atquadrupole</a>	ATQUADRUPOLE Creates a quadrupole element with Class 'Quadrupole'</li><li><a href="../../atmat/lattice/element_creation/atrbend.html" class="code" title="function elem=atrbend(fname,varargin)">atrbend</a>	ATRBEND Creates a rectangular bending magnet element with class 'Bend'</li><li><a href="../../atmat/lattice/element_creation/atrfcavity.html" class="code" title="function elem=atrfcavity(fname,varargin)">atrfcavity</a>	ATRFCAVITY Creates an rfcavity element with Class 'RFCavity'</li><li><a href="../../atmat/lattice/element_creation/atringparam.html" class="code" title="function elem=atringparam(fname,varargin)">atringparam</a>	ATRINGPARAM Creates a RingParameter Element which should go at the beginning of the ring</li><li><a href="../../atmat/lattice/element_creation/atsbend.html" class="code" title="function elem=atsbend(fname,varargin)">atsbend</a>	ATSBEND Creates a sector bending magnet element with class 'Bend'</li><li><a href="../../atmat/lattice/element_creation/atsextupole.html" class="code" title="function elem=atsextupole(fname,varargin)">atsextupole</a>	ATSEXTUPOLE Creates a sextupole element with class 'Sextupole'</li><li><a href="../../atmat/lattice/element_creation/atskewquad.html" class="code" title="function elem = atskewquad(fname,varargin)">atskewquad</a>	ATSKEWQUAD Creates a skew quadrupole element with Class 'Multipole'</li><li><a href="../../atmat/lattice/element_creation/atsolenoid.html" class="code" title="function Elem=atsolenoid(fname,varargin)">atsolenoid</a>	ATSOLENOID Creates a new solenoid element with Class 'Solenoid'</li><li><a href="../../atmat/lattice/element_creation/atthinmultipole.html" class="code" title="function elem=atthinmultipole(fname,varargin)">atthinmultipole</a>	ATTHINMULTIPOLE Creates a thin multipole element</li><li><a href="../../atmat/lattice/survey/atgeometry.html" class="code" title="function  [posdata,radius] = atgeometry(ring,varargin)">atgeometry</a>	ATGEOMETRY Computes the 2-D position of all elements (no vertical bend)</li><li><a href="../../atmat/lattice/survey/atgeometry3.html" class="code" title="function  posdata = atgeometry3(ring,varargin)">atgeometry3</a>	ATGEOMETRY3 Computes the 3-D position of all elements</li></ul>
</div>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../atcollab.png)"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [optval,opts] = getoption(opts,optname,defval)</a>
0002 <span class="comment">%GETOPTION Extract a keyword argument from the input arguments</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%OPTVAL=GETOPTION(ARGS,OPTNAME)</span>
0005 <span class="comment">%   Extract a keyword argument, in the form of a pair &quot;name,value&quot; from</span>
0006 <span class="comment">%   input arguments (typically from VARARGIN).</span>
0007 <span class="comment">%    Return the value of the desired option from the argument list and</span>
0008 <span class="comment">%    send an exception if it is absent. Option names are case insensitive</span>
0009 <span class="comment">% ARGS:     Argument list (cell array or structure)</span>
0010 <span class="comment">% OPTNAME:    Name of the desired option</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%OPTVAL=GETOPTION(ARGS,OPTNAME,OPTDEFAULT)</span>
0014 <span class="comment">%    Return a default value if the option is absent</span>
0015 <span class="comment">% OPTDEFAULT:   Default value for the option</span>
0016 <span class="comment">%</span>
0017 <span class="comment">%[OPTVAL,NEWARGS]=GETOPTION(...)</span>
0018 <span class="comment">%  Return the remaining arguments after removing the processed ones</span>
0019 <span class="comment">%</span>
0020 <span class="comment">%Example:</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%function testfunc(varargin)</span>
0023 <span class="comment">%</span>
0024 <span class="comment">%[optflag,args]=getflag(varargin,'option');     % Extract an optional flag</span>
0025 <span class="comment">%[range,args]=getoption(args,'Range', 1:10);    % Extract a keyword argument</span>
0026 <span class="comment">%[width, height]=getargs(args,{210,297});       % Extract positional arguments</span>
0027 <span class="comment">%</span>
0028 <span class="comment">%See also GETFLAG, GETARGS</span>
0029 
0030 <span class="keyword">if</span> iscell(opts)
0031     ok=[strcmpi(optname,opts(1:end-1)) false];  <span class="comment">%option name cannot be the last argument</span>
0032     <span class="keyword">if</span> any(ok)
0033         okval=circshift(ok,[0,1]);
0034         defval=opts{find(okval,1,<span class="string">'last'</span>)};
0035         opts(ok|okval)=[];
0036     <span class="keyword">end</span>
0037 <span class="keyword">elseif</span> isstruct(opts)
0038     <span class="keyword">if</span> isfield(opts,optname)
0039         defval=opts.(optname);
0040         opts=rmfield(opts,optname);
0041     <span class="keyword">end</span>
0042 <span class="keyword">end</span>
0043 <span class="keyword">try</span>
0044     optval=defval;
0045 <span class="keyword">catch</span>       <span class="comment">% Dould be 'MATLAB:minrhs'</span>
0046     error(<span class="string">'getoption:missing'</span>,<span class="string">'Option &quot;%s&quot; is missing'</span>,optname);
0047 <span class="keyword">end</span>
0048 <span class="keyword">end</span></pre></div>
<hr>
<hr><address>GitHub Website <strong><a href="https://github.com/atcollab/at" target="_parent">at</a></strong> &copy; 2018</address>
<br />
<address>Generated on Sun 04-Mar-2018 00:43:10 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>