<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of setcellstruct</title>
  <meta name="keywords" content="setcellstruct">
  <meta name="description" content="SETCELLSTRUCT sets the field values of MATLAB cell array of structures">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html atmat --><!-- menu.html lattice --><h1>setcellstruct
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>SETCELLSTRUCT sets the field values of MATLAB cell array of structures</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function CELLARRAY = setcellstruct(CELLARRAY,field,index,values,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../atcollab.png)"><pre class="comment">SETCELLSTRUCT sets the field values of MATLAB cell array of structures

   Note that the calling syntax must be in the form of assignment:
   CELLARRAY = SETCELLSTRUCT(CELLARRAY,...)
   MATLAB does not modify variables that only appear on the right
   hand side as arguments.

 Numeric data
 ---------------------------------------------------------
 CELLARRAY = SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE,M,N)
     Sets (M,N) element equal to VALUE when the field data is
   a matrix. The assigned VALUE may be
   1. Scalar numeric value to be written to all CELLARRAY elements
   2. Numeric array of the same length as INDEX array

 CELLARRAY = SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE,M) can be used
   for one dimensional vectors

 CELLARRAY = SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE) is the same as
   SETCELLSTRUCT(CELLARRAY,'field',index,1,1) if the field data
   is a scalar

 Character array
 --------------------------------------------------------------------
 CELLARRAY SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE) is a MATLAB
   cell array of strings when specified fields contain strings.
   The assignment VALUE may be
   1. Character string, 
   2. Character array with the number of rows matching the number of
       elements in INDEX array,
   3. Cell array of strings, with either one element or with the same
       length as index.

 See also <a href="atsetfieldvalues.html" class="code" title="function newring = atsetfieldvalues(ring,varargin)">ATSETFIELDVALUES</a> <a href="getcellstruct.html" class="code" title="function values = getcellstruct(CELLARRAY,field,index,varargin)">GETCELLSTRUCT</a> <a href="findcells.html" class="code" title="function index = findcells(CELLARRAY, field, varargin)">FINDCELLS</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../atcollab.png)">
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../atmat/atdemos/atmatchExamples/ExampleATMATCH/VaryQuadFam.html" class="code" title="function R=VaryQuadFam(R,K1val,fam)">VaryQuadFam</a>	</li><li><a href="../../atmat/atdemos/responseMatrix/findrespmdemo.html" class="code" title="">findrespmdemo</a>	FINDRESPMDEMO response matrix demo</li><li><a href="../../atmat/atphysics/LongitudinalDynamics/atsetcavity.html" class="code" title="function newring = atsetcavity(ring,rfv,radflag,HarmNumber)">atsetcavity</a>	ATSECAVITY Sets the synchronous phase of the cavity assuming radiation</li><li><a href="../../atmat/atphysics/LongitudinalDynamics/cavityon.html" class="code" title="function varargout = cavityon(varargin)">cavityon</a>	CAVITYON turns Cavities ON</li><li><a href="../../atmat/atphysics/Radiation/radiationoff.html" class="code" title="">radiationoff</a>	RADIATIONOFF turns classical radiation  OFF</li><li><a href="../../atmat/atphysics/Radiation/radiationon.html" class="code" title="">radiationon</a>	RADIATIONON turns classical radiation  ON</li><li><a href="../../atmat/atphysics/TuneAndChromaticity/fitchrom2.html" class="code" title="function varargout =  fitchrom2(newchrom, sextfam1, sextfam2, varargin);">fitchrom2</a>	FITCHROM2 fits chromaticity  of THERING using 2 sextupole families</li><li><a href="../../atmat/atphysics/TuneAndChromaticity/fittune2.html" class="code" title="function [dK, Jinv] =  fittune2(newtunes, quadfam1, quadfam2, varargin);">fittune2</a>	FITTUNE2 fits linear tunes of THERING using 2 quadrupole families</li><li><a href="atsetRFCavity.html" class="code" title="function newring = atsetRFCavity(ring, rfv, radflag, HarmNumber, DeltaFreq )">atsetRFCavity</a>	ATSETRFCAVITY - sets the RF Cavity with the passmethod RFCavityPass.</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/correction/RFcavity/atsetRFCavityErr.html" class="code" title="function [newring, inCOD]= atsetRFCavityErr( ring, rfv, radflag, HarmNumber, inCOD, DeltaFreq )">atsetRFCavityErr</a>	ATSETRFCAVITY sets the RF Cavity with the passmethod RFCavityPass.</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/correction/chromaticity/atmatchchromdelta.html" class="code" title="function [arcchrom0,deltsext]=atmatchchromdelta(arc,c,sxtfams)">atmatchchromdelta</a>	function arcchrom0=atmatchchromdelta(arc,c,sxtfams)</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/correction/trajectory/atfirstturntrajectory.html" class="code" title="function [rclosed,inCOD]=atfirstturntrajectory(ropen,inCOD,indBPM,indHCor,indVCor,lim,maxcornum,correctflags,ModelRM,reforbit,steererlimit,printouttext)">atfirstturntrajectory</a>	ATFIRSTTURNTRAJECTORY Makes first turn correction</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/correction/tune/atmatchtunedelta.html" class="code" title="function arctune0=atmatchtunedelta(arc,tune,quadfams)">atmatchtunedelta</a>	function arcchrom0=atmatchtunedelta(arc,c,quadfams)</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/errors/errorsmanipulation/SetExistingError.html" class="code" title="function rerr=SetExistingError(rerr,magindex,indBPM,X0,Y0,S0,T0,R0,P0,bpm0)">SetExistingError</a>	function SetExistingError(rerr,magindex,X0,Y0,S0,T0,R0,P0,bpm0)</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/errors/errorsmanipulation/setBpmOffsetOnDipoleRef.html" class="code" title="function rerr=setBpmOffsetOnDipoleRef(rerr)">setBpmOffsetOnDipoleRef</a>	% set bpm on curve defined by dipole misalignments</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/errors/random/atsetrandomerrors.html" class="code" title="function rerr=atsetrandomerrors(rerr,magindex,indBPM,seed,sigma,nsig,type)">atsetrandomerrors</a>	function rerr=atsetrandomerrors(...</li><li><a href="../../atmat/pubtools/LatticeTuningFunctions/errors/wave/atsetwaveerrors.html" class="code" title="function rerr=atsetwaveerrors(rerr,magindex,indBPM,W,A,type)">atsetwaveerrors</a>	function rerr=atsetwaveerrors(...</li><li><a href="../../atmat/pubtools/calc_dppAperture.html" class="code" title="function [deltap,deltam, indextab] = calc_dppAperture(THERING, varargin)">calc_dppAperture</a>	calculate the momentum aperture at each location of the ring due to</li><li><a href="../../machine_data/spear2.html" class="code" title="function spear2">spear2</a>	SPEAR2 example lattice definition file</li><li><a href="../../machine_data/spear2rad.html" class="code" title="function spear2rad">spear2rad</a>	SPEAR2RAD example lattice definition file with CAVITY and CLASSICAL radiation</li></ul>
</div>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../atcollab.png)"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function CELLARRAY = setcellstruct(CELLARRAY,field,index,values,varargin)</a>
0002 <span class="comment">%SETCELLSTRUCT sets the field values of MATLAB cell array of structures</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   Note that the calling syntax must be in the form of assignment:</span>
0005 <span class="comment">%   CELLARRAY = SETCELLSTRUCT(CELLARRAY,...)</span>
0006 <span class="comment">%   MATLAB does not modify variables that only appear on the right</span>
0007 <span class="comment">%   hand side as arguments.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% Numeric data</span>
0010 <span class="comment">% ---------------------------------------------------------</span>
0011 <span class="comment">% CELLARRAY = SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE,M,N)</span>
0012 <span class="comment">%     Sets (M,N) element equal to VALUE when the field data is</span>
0013 <span class="comment">%   a matrix. The assigned VALUE may be</span>
0014 <span class="comment">%   1. Scalar numeric value to be written to all CELLARRAY elements</span>
0015 <span class="comment">%   2. Numeric array of the same length as INDEX array</span>
0016 <span class="comment">%</span>
0017 <span class="comment">% CELLARRAY = SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE,M) can be used</span>
0018 <span class="comment">%   for one dimensional vectors</span>
0019 <span class="comment">%</span>
0020 <span class="comment">% CELLARRAY = SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE) is the same as</span>
0021 <span class="comment">%   SETCELLSTRUCT(CELLARRAY,'field',index,1,1) if the field data</span>
0022 <span class="comment">%   is a scalar</span>
0023 <span class="comment">%</span>
0024 <span class="comment">% Character array</span>
0025 <span class="comment">% --------------------------------------------------------------------</span>
0026 <span class="comment">% CELLARRAY SETCELLSTRUCT(CELLARRAY,'field',INDEX,VALUE) is a MATLAB</span>
0027 <span class="comment">%   cell array of strings when specified fields contain strings.</span>
0028 <span class="comment">%   The assignment VALUE may be</span>
0029 <span class="comment">%   1. Character string,</span>
0030 <span class="comment">%   2. Character array with the number of rows matching the number of</span>
0031 <span class="comment">%       elements in INDEX array,</span>
0032 <span class="comment">%   3. Cell array of strings, with either one element or with the same</span>
0033 <span class="comment">%       length as index.</span>
0034 <span class="comment">%</span>
0035 <span class="comment">% See also ATSETFIELDVALUES GETCELLSTRUCT FINDCELLS</span>
0036 
0037 <span class="keyword">if</span>(~iscell(CELLARRAY) || ~isstruct(CELLARRAY{1}) || isempty(CELLARRAY))
0038     error(<span class="string">'The first argument must be a non-empty cell array of structures'</span>)
0039 <span class="keyword">end</span>
0040 <span class="comment">% Chechk if the second argument is a string</span>
0041 <span class="keyword">if</span>(~ischar(field))
0042     error(<span class="string">'The second argument ''field'' must be a character string'</span>)
0043 <span class="keyword">end</span>
0044 
0045 <span class="comment">% cell array 'mn' here is used as comma separated list</span>
0046 <span class="comment">% to pass as an argument to setfield.</span>
0047 <span class="keyword">if</span> nargin &gt; 4
0048     mn=varargin;
0049 <span class="keyword">else</span>
0050     mn={1};
0051 <span class="keyword">end</span>
0052 
0053 <span class="keyword">if</span> ischar(values)
0054     values=cellstr(values);
0055 <span class="keyword">end</span>
0056 
0057 selcells=CELLARRAY(index);
0058 NV = length(selcells);
0059 <span class="keyword">if</span> length(values)==1
0060     values=values(ones(NV,1));
0061 <span class="keyword">end</span>
0062 
0063 <span class="keyword">if</span> isnumeric(values)
0064     <span class="keyword">for</span> I=1:NV
0065         selcells{I} = setfield(selcells{I},field,mn,values(I));
0066     <span class="keyword">end</span>
0067 <span class="keyword">elseif</span> iscell(values)
0068     <span class="keyword">for</span> I=1:NV
0069         selcells{I}.(field)=values{I};
0070     <span class="keyword">end</span>
0071 <span class="keyword">else</span>
0072     error(<span class="string">'The field data must be numeric or character array'</span>);
0073 <span class="keyword">end</span>
0074 
0075 CELLARRAY(index)=selcells;
0076 
0077</pre></div>
<hr><address>Generated on Sat 03-Mar-2018 19:26:17 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>